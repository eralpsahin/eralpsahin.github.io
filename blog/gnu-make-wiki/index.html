<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.55.6"><link rel=stylesheet type=text/css href=https://eralpsahin.com/css/blog.css><link rel=stylesheet type=text/css href=https://eralpsahin.com/css/main.css><title>GNU Make Wiki | Eralp Sahin</title></head><body class=stackedit><div class=stackedit__left><div class=stackedit__toc><ul><li><a href=#gnu-make-wiki>GNU Make Wiki</a><ul><li><a href=#glossary>Glossary</a></li><li><a href=#makefile-rule-syntax>Makefile Rule Syntax</a><ul><li><a href=#simple-rule>Simple Rule</a></li></ul></li><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#useful-command-line-options>Useful command-line options</a></li><li><a href=#references>References</a></li></ul></li></ul></div></div><div class=stackedit__right><div class=stackedit__html><h1 id=gnu-make-wiki>GNU Make Wiki</h1><blockquote><p>This markdown is a sketched summary of the <em>Managing Projects with GNU Make</em>.<sup class=footnote-ref><a href=#fn1 id=fnref1>1</a></sup></p></blockquote><h2 id=glossary>Glossary</h2><ol><li><strong>Target</strong>: Usually the name of the file generated by the command, sometimes the name
of the action such as <code>clean</code>.</li><li><strong>Prerequisite</strong>: Other <em>target</em> that is required to build the current one. A
rule may include multiple prerequisites. <em>Prerequisites</em> can also be non-target files.</li><li><strong>Recipe</strong>: Set of commands for the <em>target</em>.</li><li><strong>Rule</strong>: The combination of <em>target</em> <em>prerequisite</em> and <em>recipe</em>.</li><li><strong>Goal</strong>: Goals are the targets that <code>make</code> strives ultimately to update.</li></ol><h2 id=makefile-rule-syntax>Makefile Rule Syntax</h2><pre class=language-makefile><code class="prism  language-makefile"><span class="token symbol">target1 target2</span><span class="token punctuation">:</span> prerequisite1 prerequisite2 ...
	recipe1
	recipe2
	...
</code></pre><ul><li><em>Rule</em> starts with the <em>target</em>, then a colon <em>:</em> to separate
<em>prerequisites</em> written in the same line. <em>Recipes</em> are written on new line after a
tab <code>\t</code> character.</li><li><em>Target</em> of a rule is generally single but it can also be multiple.</li><li>Comment character in <em>makefile</em> is <code>#</code>.</li><li>Both multiline comments and prerequisites can be continued by using <code>\</code> (Unix escape
character).</li></ul><p>Makefile can be executed by <code>make</code> command. <code>make</code> cli has an optional
<em>target</em> argument. Default behavior is to use the first <em>target</em> from the makefile called
<em>default goal</em>.</p><h3 id=simple-rule>Simple Rule</h3><pre class=language-makefile><code class="prism  language-makefile"><span class="token symbol">foo</span><span class="token punctuation">:</span> foo.c
	gcc foo.c -o foo
</code></pre><p>Typically real <em>makefiles</em> consist of more rules. Ordering of the rules in a <em>makefile</em> is
generally from the most general rule to its detailed rules. Most general <em>target</em> at the top of
the <em>makefile</em> is generally called <em>all</em>.</p><p>Simply, <code>make</code> decides what target to build by checking <em>prerequisites</em>. It prepares
the <em>prerequisites</em> of the <em>rule</em> before executing the <em>recipe</em> of the
<em>target</em> itself. If a <em>target</em> is newer than all of its <em>prerequisites</em>, meaning no
change has been done, <code>make</code> won’t rebuild the <em>target</em>.</p><h2 id=prerequisites>Prerequisites</h2><ul><li>Library flags can also be prerequisites, for example the <code>-lfl</code> flag for flex library.
When <code>-l&lt;NAME&gt;</code> is seen <code>make</code> searches for
<code>lib&lt;NAME&gt;.so</code> and <code>lib&lt;NAME&gt;.a</code> files.</li></ul><h2 id=useful-command-line-options>Useful command-line options</h2><ul><li><code>--just-print</code> or <code>-n</code> displays commands that would be executed for a given
<em>target</em>.</li></ul><h2 id=references>References</h2><hr class=footnotes-sep><section class=footnotes><ol class=footnotes-list><li id=fn1 class=footnote-item><p><a href=#>Mecklenburg, R. (2004). <em>Managing Projects with GNU Make: The Power of GNU
Make for Building Anything</em>. " O’Reilly Media, Inc."</a> <a href=#fnref1 class=footnote-backref>↩︎</a></p></li></ol></section></div></div></body><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script src=https://unpkg.com/zooming@2.1.1/build/zooming.min.js></script><script src=https://eralpsahin.com/js/blog.js></script></html>